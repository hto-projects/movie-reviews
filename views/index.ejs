<%- include('partials/header'); %>
<script>
  function allowDelete() {
    const password = prompt("enter");
    if (password === "allowthis") {
      document.querySelectorAll(".del-button").forEach(delb => {
        delb.style.display = "inline-block";
      });
    }
  }
</script>
<div>
<% if (reviews.length > 0) { %>
	<table class="table">
		<thead class="thead-dark">
			<tr>
				<th>Reviewer</th>
				<th>Movie</th>
				<th>Rating</th>
				<th><button style="background:#343a40;border:none;color:white;font-weight:bold" onclick="allowDelete()">Action</button></th>
			</tr>
		</thead>
		<tbody>
		<% for (let i = 0; i < reviews.length; i++) { %>
			<tr>
				<td><%= reviews[i].reviewer %></td>
				<td><%= reviews[i].movieTitle %></td>
				<td><%= reviews[i].rating %> / 5</td>
				<td>
					<a href="/view/<%= reviews[i].id %>" class="btn btn-sm btn-success">View</a>
					<a style="display: none" href="/delete/<%= reviews[i].id %>" class="btn btn-sm btn-danger del-button">Delete</a>
				</td>
			</tr>
		<% } %>
		</tbody>
	</table>
<% } else { %>
	<p class="text-center">No reviews found.</p>
<% } %>
</div>
</div>
</body>
</html>
